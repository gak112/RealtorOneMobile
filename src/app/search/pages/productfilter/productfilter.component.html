<ion-header>
  <ion-toolbar>
    <ion-icon name="arrow-back-outline" class="icon-close" (click)="dismiss('cancel')"></ion-icon>
    <ion-title>Filter – {{ categoryLabel() }}</ion-title>
    <ion-button size="small" [color]="categoryColor()" class="category-pill">{{ categoryLabel() }}</ion-button>
  </ion-toolbar>
</ion-header>

<ion-content class="saree-filter">
  <div class="filter-container">
    <div class="filter-tabs-left">
      <div class="tab" [class.active]="activeTab() === 'saleType'" (click)="activeTab.set('saleType')"><ion-label>Sale
          Type</ion-label></div>
      <div class="tab" [class.active]="activeTab() === 'price'" (click)="activeTab.set('price')">
        <ion-label>Price</ion-label>
      </div>
      <div class="tab" [class.active]="activeTab() === 'houseType'" (click)="activeTab.set('houseType')">
        <ion-label>House Type</ion-label>
      </div>
      <div class="tab" [class.active]="activeTab() === 'bhkType'" (click)="activeTab.set('bhkType')"><ion-label>BHK
          Type</ion-label></div>
    </div>

    <div class="filter-tabs-right">
      @if (activeTab() === 'saleType') {
      <div class="options">
        <div class="option-box" [class.active]="saleType()==='sale'" (click)="toggleSale('sale')">Sale</div>
        <div class="option-box" [class.active]="saleType()==='rent'" (click)="toggleSale('rent')">Rent</div>
      </div>
      }

      @if (activeTab() === 'price') {
      <div class="options" style="display:grid;gap:8px">
        <div class="option-box" style="display:flex;gap:8px;align-items:center">
          <ion-label>Min</ion-label>
          <ion-input type="number" placeholder="₹ min" [value]="priceMin() ?? ''"
            (ionInput)="onMinChange($event)"></ion-input>
        </div>
        <div class="option-box" style="display:flex;gap:8px;align-items:center">
          <ion-label>Max</ion-label>
          <ion-input type="number" placeholder="₹ max" [value]="priceMax() ?? ''"
            (ionInput)="onMaxChange($event)"></ion-input>
        </div>
      </div>
      }

      @if (activeTab() === 'houseType') {
      <div class="options">
        @for (t of houseTypeOptions; track t) {
        <div class="option-box" [class.active]="houseType().includes(t)" (click)="toggleFrom(houseType, t)">{{ t }}
        </div>
        }
      </div>
      }

      @if (activeTab() === 'bhkType') {
      <div class="options">
        @for (b of bhkOptions; track b) {
        <div class="option-box" [class.active]="bhkType().includes(b)" (click)="toggleFrom(bhkType, b)">{{ b }}</div>
        }
      </div>
      }
    </div>
  </div>
</ion-content>

<ion-footer class="filter-footer">
  <div class="div-buttons">
    <ion-button fill="clear" class="clear-btn" (click)="clearAll()">CLEAR</ion-button>
    <ion-button fill="solid" class="apply-btn" color="primary" (click)="apply()">APPLY</ion-button>
  </div>
</ion-footer>