<ion-item-sliding
  #slider
  appLongPress
  [duration]="1000"
  [canSelectMessages]="canSelectMessages()"
  (longPress)="selectMessage()"
  [style.background-color]="
    selectedMessage()?.id === message().id ? 'rgb(59 89 152 / 40%)' : null
  "
>
  @if(selectedMessage()?.id === message().id){
  <ion-icon
    (click)="selectedMessage.set(null)"
    name="close-circle"
    style="
      position: absolute;
      top: 8px;
      left: 4px;
      z-index: 10;
      font-size: 24px;
      color: gray;
    "
  ></ion-icon>
  }
  <ion-item
    style="
      --background: transparent;
      --inner-border-width: 0;
      --padding-start: 0;
      --inner-padding-end: 0;
      width: 80%;
      margin-left: auto;
      position: relative;
    "
  >
    <div class="right-flex">
      <div class="message sent" style="margin-left: 0; margin-right: 10px">
        @if(message().isDeleted){
        <ion-label class="p-entertext">
          <ion-icon name="warning-outline"></ion-icon> The message has been
          deleted</ion-label
        >
        }@else { @if(message().type === 'reply') {
        <div class="div-img-reply">
          @let imageUrl = message().replyMessage?.image;
          <div class="div-reply-text1">
            <ion-label class="p-username">{{
              message().replyMessage?.senderId === user()?.uid
                ? "You"
                : replySender()?.fullName || replySender()?.firstName
            }}</ion-label>
            <ion-label class="label-reply-text">
              {{ message().replyMessage?.message }}</ion-label
            >
            @if(imageUrl){
            <div class="div-p">
              <ion-icon name="camera"></ion-icon>
              <ion-label class="p-usertext">Photo</ion-label>
            </div>
            }
          </div>
          @if(imageUrl){
          <div class="div-img">
            <ion-img [src]="imageUrl" class="img-reply" style="margin: 0;border-radius: 0px;"></ion-img>
          </div>
          }
        </div>
        }
        <ion-label class="p-entertext">{{ message().message }}</ion-label>
        @if(message().image){
        <ion-img (click)="openImage(message().image)" [src]="message().image" class="img-settings"></ion-img>
        }
        <span class="metadata">


          <span class="time">{{ message().sortDate | date : "h:mm a" }}</span>
          @if(message().seenBy[otherUserId() ?? '']){
          <span class="tick">
            <ion-icon
              name="checkmark-done-sharp"
              style="color: #3880ff"
            ></ion-icon>
          </span>
          }@else {
          <span class="tick">
            <ion-icon name="checkmark-sharp" style="color: var(--color-777);"></ion-icon>
          </span>
          }
        </span>
        }
      </div>
    </div>
  </ion-item>
  <ion-item-options> </ion-item-options>
</ion-item-sliding>
