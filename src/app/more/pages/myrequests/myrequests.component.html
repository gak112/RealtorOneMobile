<ion-header>
  <ion-toolbar>
    <ion-icon name="chevron-back-outline"
      class="icon-close"
      (click)="dismiss()"
     />
    <ion-title>My properties</ion-title>
  </ion-toolbar>

  <ion-toolbar style="--padding-start:0;--padding-end:0;--min-height:55px;--padding-top:0;--padding-bottom:0;">
    <ion-searchbar [debounce]="500"
      placeholder="Search by title, address, agent…"
      style="padding:0"
      (ionInput)="onSearch($event)"
      (ionClear)="clearSearch()"
      show-clear-button="focus"
     />
  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- Error banner -->
  @if (errorMsg()) {
    <div class="error-banner">
      {{ errorMsg() }}
    </div>
  }

  <!-- Empty state -->
  @if (!loading() && filtered().length === 0) {
    <div class="empty-wrap">
      <p>
        @if (searchQuery().trim()) {
          No results for “{{ searchQuery() }}”.
        } @else {
          No properties found.
        }
      </p>
    </div>
  }

  <!-- Results -->
  <div class="list-wrap">
    @for (p of filtered(); track p.id) {
      <app-my-property-card [property]="p" />
    }
  </div>

</ion-content>
