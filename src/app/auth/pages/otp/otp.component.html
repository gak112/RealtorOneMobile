<ion-content [scrollY]="false">
  <div class="div-bg-dot">
    <ion-img src="assets/img/dot-bg.jpg" />
  </div>

  <div class="div-login-main">
    <!-- Header -->
    <div class="div-logo-title">
      <ion-img src="assets/img/shape2.png" class="logo-image" />
      <div class="div-label">
        <ion-label class="label-title">Verify OTP</ion-label>
        <span class="subtitle">Realtor One</span>
      </div>
      <ion-icon name="arrow-back-outline" class="close" (click)="close()" />
    </div>

    <!-- OTP section -->
    <div class="div-otp-section">
      <ion-label class="p-text-format">
        Please enter the verification code sent to
        <span>{{ maskedPhone() }}</span>
      </ion-label>

      <!-- IMPORTANT: use 'track $index' and reference $index inside -->
      <div class="otp-inputs" [class.invalid]="!!errorMsg()">
        @for (d of digits(); track $index) {
        <ion-input class="otp-box" mode="md" fill="outline" inputmode="numeric" maxlength="1" [value]="d"
          (ionInput)="onInput($index, $event)" (keydown)="onKeyDown($index, $event)"
          (paste)="onPaste($index, $event)" />
        }
      </div>

      @if (errorMsg()) {
      <div class="error-msg">{{ errorMsg() }}</div>
      }

      @if (!canResend()) {
      <ion-label class="label-time-left">
        Time Left: <span>{{ secondsLeft() }}</span> Seconds
      </ion-label>
      }

      @if (canResend()) {
      <div class="div-resend" (click)="onResend()">
        <ion-icon name="reload-outline" />
        <ion-label>Resend Code</ion-label>
      </div>
      }
    </div>

    <!-- Verify button -->
    <div class="div-button">
      <ion-button class="ion-button-settings" expand="block" color="warning"
        [disabled]="!isValidOtp() || loadingVerify()" (click)="onVerify()" enterkeyhint="done">
        @if (loadingVerify()) {
        <ion-spinner name="bubbles" />
        } @else {
        <span>Verify Code</span>
        }
      </ion-button>
    </div>

    <!-- Footer -->
    <div class="div-h5">
      <ion-label class="p-register">Powered by</ion-label>
      <ion-label class="p-company-name">Arhasri Technologies Private Limited</ion-label>
    </div>
  </div>
</ion-content>