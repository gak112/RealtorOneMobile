<ion-header>
  <ion-toolbar>
    <ion-icon name="chevron-back-outline" class="icon-close" (click)="dismiss()"></ion-icon>
    <ion-title>{{ header() }}</ion-title>

    <div class="div-select-filter">
      @if (filterCount() > 0) {
        <ion-button size="small" color="warning" class="span-apply" (click)="openFilters()">
          Filter ({{ filterCount() }})
        </ion-button>
        <ion-button size="small" fill="clear" (click)="clearFilters()">Clear</ion-button>
      } @else {
        <ion-button size="small" color="warning" class="span-apply" (click)="openFilters()">Filter</ion-button>
      }
    </div>
  </ion-toolbar>

  <ion-toolbar style="--padding-start:0;--padding-end:0;--min-height:55px;--padding-top:0;--padding-bottom:0;">
    <ion-searchbar
      [debounce]="600"
      placeholder="Search by title, location, or price"
      style="padding-top:10px"
      (ionInput)="onSearch($event)">
    </ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if (filtered().length === 0) {
    <div style="padding:16px; text-align:center; color:#777;">No properties match your filters.</div>
  }

  <div>
    @for (property of filtered(); track trackById($index, property)) {
      <app-realestate-card [property]="property" [admin]="{ uid: 'admin' }"></app-realestate-card>
    }
  </div>

  <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>








<!-- <ion-header>
  <ion-toolbar>
    <ion-icon name="chevron-back-outline" class="icon-close" (click)="dismiss()"></ion-icon>

    <ion-title>{{ actionType }}</ion-title>

    <div class="div-select-filter">
      @if (hasActiveFilters()) {
        <ion-button size="small" color="medium" class="span-apply" (click)="clearFilters()">
          Clear ({{ activeFiltersCount() }})
        </ion-button>
      } @else {
        <ion-button size="small" color="warning" class="span-apply" (click)="openFilters()">
          Filter
        </ion-button>
      }
    </div>
  </ion-toolbar>

  <ion-toolbar style="--padding-start:0;--padding-end:0;--min-height:55px;--padding-top:0;--padding-bottom:0;">
    <ion-searchbar
      [debounce]="600"
      placeholder="Search by title or location"
      style="padding-top:10px"
      (ionInput)="onSearch($event)">
    </ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content>
  @if (hasActiveFilters()) {
    <div class="ion-padding">
      <small>{{ filtersSummary() }}</small>
    </div>
  }

  <div>
    filtered: {{ filtered().length }}
    @for (property of filtered(); track property.id) {
      <app-realestate-card [property]="property" [admin]="{ uid: 'admin' }"></app-realestate-card>
    } @empty {
      <div class="ion-padding" style="opacity:.7">No properties found.</div>
    }
  </div>

  <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content> -->